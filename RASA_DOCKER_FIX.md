# Rasa Docker Fix

## –ü—Ä–æ–±–ª–µ–º–∞

–í –ª–æ–≥–∞—Ö Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ—è–≤–ª—è–ª–∞—Å—å –æ—à–∏–±–∫–∞:
```
rasa: error: argument {init,run,shell,train,interactive,telemetry,test,visualize,data,export,x,evaluate}: invalid choice: 'bash'
```

## –ü—Ä–∏—á–∏–Ω–∞

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ –≤ `docker-compose-rasa-only.yml`:
```yaml
command: >
  bash -c "rasa train --domain domain.yml --data data/ --config config.yml &&
           rasa run --enable-api --cors '*' --debug --port 5005"
```

Rasa Docker –æ–±—Ä–∞–∑ –∏–º–µ–µ—Ç —Å–≤–æ–π entrypoint, –∫–æ—Ç–æ—Ä—ã–π –æ–∂–∏–¥–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã Rasa –Ω–∞–ø—Ä—è–º—É—é, –∞ –Ω–µ —á–µ—Ä–µ–∑ bash.

## –†–µ—à–µ–Ω–∏—è

### ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–§–∞–π–ª—ã:**
- `docker-compose-rasa-fixed.yml` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `rasa-docker-setup.sh` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞
- `test-rasa-quick.sh` - –±—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

**–ó–∞–ø—É—Å–∫:**
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫
./rasa-docker-setup.sh

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
./test-rasa-quick.sh
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –°–Ω–∞—á–∞–ª–∞ –æ–±—É—á–∞–µ—Ç—Å—è –º–æ–¥–µ–ª—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
2. –ó–∞—Ç–µ–º –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä —Å –≥–æ—Ç–æ–≤–æ–π –º–æ–¥–µ–ª—å—é
3. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å bash –∫–æ–º–∞–Ω–¥–∞–º–∏

### ‚úÖ –†–µ—à–µ–Ω–∏–µ 2: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

**–§–∞–π–ª:** `run-rasa-local.sh`

**–ó–∞–ø—É—Å–∫:**
```bash
./run-rasa-local.sh
```

–ó–∞–ø—É—Å–∫–∞–µ—Ç Rasa –Ω–∞–ø—Ä—è–º—É—é –≤ —Å–∏—Å—Ç–µ–º–µ –±–µ–∑ Docker.

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ docker-compose-rasa-fixed.yml:

```yaml
# ‚ùå –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
command: >
  bash -c "rasa train && rasa run"

# ‚úÖ –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (—Ä–∞–±–æ—Ç–∞–µ—Ç)
command: [
  "rasa", "run", 
  "--enable-api", 
  "--cors", "*", 
  "--debug", 
  "--port", "5005",
  "--model", "/app/models"
]
```

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–£–±—Ä–∞–ª–∏ bash -c**: Rasa –æ–±—Ä–∞–∑ –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π entrypoint
2. **–†–∞–∑–¥–µ–ª–∏–ª–∏ –æ–±—É—á–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫**: –æ–±—É—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞—Ä–∞–Ω–µ–µ
3. **–Ø–≤–Ω–æ —É–∫–∞–∑–∞–ª–∏ –ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏**: `--model /app/models`
4. **–ò—Å–ø–æ–ª—å–∑—É–µ–º array syntax**: –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ –¥–ª—è Docker

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Docker –≤–µ—Ä—Å–∏—è:
```bash
# –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –æ–±—É—á–µ–Ω–∏–µ + –∑–∞–ø—É—Å–∫
./rasa-docker-setup.sh

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose -f docker-compose-rasa-fixed.yml logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose -f docker-compose-rasa-fixed.yml down

# –¢–æ–ª—å–∫–æ –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
docker run --rm -v "$(pwd)/app/rasa:/app" -w /app rasa/rasa:3.6.13-full rasa train
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
./run-rasa-local.sh
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# –ë—ã—Å—Ç—Ä—ã–π –∞–≤—Ç–æ—Ç–µ—Å—Ç
./test-rasa-quick.sh

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Å—Ç
python test_rasa.py

# –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
# –û—Ç–∫—Ä–æ–π—Ç–µ rasa-tester.html –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl http://localhost:5005/status

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
curl -X POST http://localhost:5005/webhooks/rest/webhook \
  -H "Content-Type: application/json" \
  -d '{"sender": "test", "message": "–ø—Ä–∏–≤–µ—Ç"}'
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
.
‚îú‚îÄ‚îÄ docker-compose-rasa-fixed.yml   # ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docker-compose-rasa-only.yml    # ‚ùå –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è —Å –æ—à–∏–±–∫–æ–π
‚îú‚îÄ‚îÄ rasa-docker-setup.sh             # üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Docker setup
‚îú‚îÄ‚îÄ run-rasa-local.sh                # üêç –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker
‚îú‚îÄ‚îÄ test-rasa-quick.sh               # üß™ –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îî‚îÄ‚îÄ app/rasa/
    ‚îú‚îÄ‚îÄ config.yml
    ‚îú‚îÄ‚îÄ domain.yml
    ‚îú‚îÄ‚îÄ data/
    ‚îî‚îÄ‚îÄ models/
```

## –°–æ–≤–µ—Ç—ã

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker –≤–µ—Ä—Å–∏—é** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö: `docker-compose logs -f`
4. **–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏** –≤ `app/rasa/models/`
5. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ—Ä—Ç 5005** - –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤–æ–±–æ–¥–µ–Ω

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Docker –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Docker daemon
docker version

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker
sudo systemctl restart docker
```

### Rasa –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose -f docker-compose-rasa-fixed.yml logs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
docker ps

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose -f docker-compose-rasa-fixed.yml restart
```

### –ú–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–∏
ls -la app/rasa/models/

# –ü–µ—Ä–µ–æ–±—É—á–∏—Ç–µ –º–æ–¥–µ–ª—å
docker run --rm -v "$(pwd)/app/rasa:/app" -w /app rasa/rasa:3.6.13-full rasa train
```
